\documentclass[11pt]{article}
\usepackage[a4paper,margin=2.2cm]{geometry}
\usepackage[spanish]{babel}
\usepackage[utf8]{inputenc}
\usepackage{enumitem}
\usepackage{booktabs}
\usepackage{xcolor}
\usepackage{tcolorbox}
\tcbset{colback=gray!4,colframe=gray!60,arc=2mm,left=6pt,right=6pt,top=4pt,bottom=4pt}

\title{Ejemplo de Historias con INVEST y 3C's \\ (AC en formato Gherkin)}
\author{Módulo Web: Autenticación y Catálogo}
\date{}

\begin{document}
\maketitle

\section*{Guía breve}
\textbf{INVEST}:
\begin{itemize}[nosep]
  \item \textbf{I}ndependiente \quad \textbf{N}egociable \quad \textbf{V}aliosa \quad \textbf{E}stimable \quad \textbf{S}mall (pequeña) \quad \textbf{T}esteable
\end{itemize}

\textbf{3C's}:
\begin{itemize}[nosep]
  \item \textbf{Card} (tarjeta): enunciado ``Como \dots quiero \dots para \dots''
  \item \textbf{Conversation} (conversación): supuestos, notas, decisiones
  \item \textbf{Confirmation} (confirmación): \textit{Acceptance Criteria} en Gherkin
\end{itemize}

\section*{Plantilla (reutilizable)}
\begin{tcolorbox}
\textbf{ID:} US-\#\#  \hfill \textbf{Tipo:} Business / Enabler \\
\textbf{Card (User Voice):} \\
Como \emph{[rol]}, quiero \emph{[actividad]} para \emph{[valor de negocio]}.\\[3pt]
\textbf{Conversation (Notas):}
\begin{itemize}[leftmargin=1.2em]
  \item Supuesto(s): \emph{[dato, restricción, dependencia]}
  \item UI/UX: \emph{[wireframe o enlace si aplica]}
  \item Datos de prueba: \emph{[ejemplos]}
\end{itemize}
\textbf{Confirmation (AC en Gherkin):}
\begin{verbatim}
Dado ...
Cuando ...
Entonces ...
\end{verbatim}
\textbf{INVEST (checklist):} I [ ]  N [ ]  V [ ]  E [ ]  S [ ]  T [ ]
\end{tcolorbox}

% ============================================================
\section*{Historias de ejemplo}

% ---------- US-01 ----------
\subsection*{US-01: Registro básico de usuario (Business)}
\begin{tcolorbox}
\textbf{Card:}\\
Como \emph{visitante}, quiero \emph{crear una cuenta con email y contraseña} para \emph{acceder a mi perfil y compras}.\\[3pt]
\textbf{Conversation:}
\begin{itemize}[leftmargin=1.2em]
  \item Supuestos: el email debe ser único; la contraseña requiere mínimo 8 caracteres (1 mayúscula, 1 dígito).
  \item Datos de prueba: \texttt{ana@example.com}, \texttt{Pedro99@example.org}.
\end{itemize}
\textbf{Confirmation (Gherkin):}
\begin{verbatim}
Escenario: Registro exitoso con credenciales válidas
  Dado que ingreso el email "ana@example.com" y contraseña "Clave2025"
  Cuando envío el formulario de registro
  Entonces el sistema crea la cuenta y me redirige al área privada

Escenario: Email ya registrado
  Dado que existe el email "ana@example.com"
  Cuando intento registrar "ana@example.com" nuevamente
  Entonces veo el mensaje "El email ya está en uso"

Escenario: Contraseña no cumple política
  Dado que ingreso el email "nuevo@example.com" y contraseña "abc"
  Cuando envío el formulario de registro
  Entonces veo el mensaje "La contraseña no cumple los requisitos"
\end{verbatim}
\textbf{INVEST:} I [x] N [x] V [x] E [x] S [x] T [x]
\end{tcolorbox}

% ---------- US-02 ----------
\subsection*{US-02: Inicio de sesión (Business)}
\begin{tcolorbox}
\textbf{Card:}\\
Como \emph{usuario}, quiero \emph{iniciar sesión con mi email y contraseña} para \emph{gestionar mis datos y pedidos}.\\[3pt]
\textbf{Conversation:}
\begin{itemize}[leftmargin=1.2em]
  \item Supuestos: bloquear después de 5 intentos fallidos por 15 minutos; sesión expira tras 30 min de inactividad.
\end{itemize}
\textbf{Confirmation (Gherkin):}
\begin{verbatim}
Escenario: Login exitoso
  Dado que existe el usuario "ana@example.com" con contraseña válida
  Cuando ingreso "ana@example.com" y la contraseña correcta
  Entonces accedo al panel "Mi perfil"

Escenario: Intentos fallidos y bloqueo
  Dado que fallo 5 veces el login para "ana@example.com"
  Cuando intento iniciar sesión nuevamente
  Entonces el sistema rechaza el acceso por "cuenta temporalmente bloqueada"

Escenario: Expiración de sesión por inactividad
  Dado que inicio sesión correctamente
  Y permanezco 30 minutos inactiva
  Cuando intento navegar a "Mi perfil"
  Entonces debo volver a iniciar sesión
\end{verbatim}
\textbf{INVEST:} I [x] N [x] V [x] E [x] S [x] T [x]
\end{tcolorbox}

% ---------- US-03 ----------
\subsection*{US-03: Recuperación de contraseña (Business)}
\begin{tcolorbox}
\textbf{Card:}\\
Como \emph{usuario}, quiero \emph{recuperar mi contraseña mediante un token de un solo uso} para \emph{restablecer el acceso si la olvido}.\\[3pt]
\textbf{Conversation:}
\begin{itemize}[leftmargin=1.2em]
  \item Supuestos: token válido 15 minutos; al usarlo se invalida; el enlace expira automáticamente.
\end{itemize}
\textbf{Confirmation (Gherkin):}
\begin{verbatim}
Escenario: Solicitud de recuperación válida
  Dado que ingreso mi email "ana@example.com" en "Olvidé mi contraseña"
  Cuando envío la solicitud
  Entonces recibo un email con un enlace de reseteo

Escenario: Token caducado
  Dado que recibí un token de reseteo hace más de 15 minutos
  Cuando abro el enlace del email
  Entonces veo "El token ha caducado, solicita uno nuevo"

Escenario: Reseteo exitoso
  Dado que abro el enlace de reseteo válido
  Cuando defino una nueva contraseña que cumple la política
  Entonces el sistema confirma "Contraseña actualizada" y el token queda inválido
\end{verbatim}
\textbf{INVEST:} I [x] N [x] V [x] E [x] S [x] T [x]
\end{tcolorbox}

% ---------- US-04 ----------
\subsection*{US-04: Visualización de catálogo (Business)}
\begin{tcolorbox}
\textbf{Card:}\\
Como \emph{visitante}, quiero \emph{ver un listado paginado de productos} para \emph{explorar el catálogo de forma cómoda}.\\[3pt]
\textbf{Conversation:}
\begin{itemize}[leftmargin=1.2em]
  \item Supuestos: 12 ítems por página; orden por relevancia; estado vacío si no hay resultados.
\end{itemize}
\textbf{Confirmation (Gherkin):}
\begin{verbatim}
Escenario: Listado paginado
  Dado que existen 35 productos publicados
  Cuando visito la página del catálogo
  Entonces veo 12 productos y un control de paginación

Escenario: Sin resultados
  Dado que no hay productos publicados
  Cuando visito la página del catálogo
  Entonces veo el mensaje "No hay productos disponibles"
\end{verbatim}
\textbf{INVEST:} I [x] N [x] V [x] E [x] S [x] T [x]
\end{tcolorbox}

% ---------- US-05 ----------
\subsection*{US-05: Filtro y búsqueda (Business)}
\begin{tcolorbox}
\textbf{Card:}\\
Como \emph{visitante}, quiero \emph{filtrar por categoría y texto} para \emph{encontrar productos relevantes rápidamente}.\\[3pt]
\textbf{Conversation:}
\begin{itemize}[leftmargin=1.2em]
  \item Supuestos: el filtro persiste al cambiar de página; combina categoría + texto; limpia filtros con un clic.
\end{itemize}
\textbf{Confirmation (Gherkin):}
\begin{verbatim}
Escenario: Filtro por categoría
  Dado que selecciono la categoría "Electrónica"
  Cuando aplico el filtro
  Entonces solo veo productos de "Electrónica"

Escenario: Búsqueda por texto + categoría
  Dado que escribo "auriculares" y selecciono "Electrónica"
  Cuando aplico los filtros
  Entonces veo productos que contienen "auriculares" dentro de "Electrónica"

Escenario: Persistencia de filtros
  Dado que apliqué filtros
  Cuando navego a la página 2
  Entonces los filtros se mantienen activos
\end{verbatim}
\textbf{INVEST:} I [x] N [x] V [x] E [x] S [x] T [x]
\end{tcolorbox}

% ---------- US-06 ----------
\subsection*{US-06: Pipeline de CI para pruebas (Enabler)}
\begin{tcolorbox}
\textbf{Card:}\\
Como \emph{equipo}, quiero \emph{ejecutar build, linters y pruebas automáticamente en cada commit} para \emph{detectar defectos temprano y cumplir la DoD}.\\[3pt]
\textbf{Conversation:}
\begin{itemize}[leftmargin=1.2em]
  \item Supuestos: la rama principal requiere pipeline en verde; reporta cobertura mínima (p.ej., 70\%).
\end{itemize}
\textbf{Confirmation (Gherkin):}
\begin{verbatim}
Escenario: Pipeline obligatorio en commits a main
  Dado que realizo un commit a la rama "main"
  Cuando se dispara el pipeline
  Entonces se ejecutan build, linters y pruebas con éxito

Escenario: Bloqueo por fallas
  Dado que el pipeline falla en pruebas
  Cuando intento fusionar a "main"
  Entonces la fusión es rechazada hasta corregir las fallas
\end{verbatim}
\textbf{INVEST:} I [x] N [x] V [x] E [x] S [x] T [x]
\end{tcolorbox}

\end{document}
